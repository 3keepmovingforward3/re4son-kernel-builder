# Installation

Copy the custom kernel tar.xz archive to your Raspberry Pi, and use
the `tar` command to extract the archive. In the example, the archive
we will be using is called `re4son-kernel_4.9.28-20170618.tar.xz`. Replace
the name of the example archive with the name of the pitft kernel
tar.gz archive.

```
$ tar -xJf re4son-kernel_4.9.28-20170618.tar.xz
```

You can now `cd` into the extracted folder. The extracted
folder will have the same name as the archive, minus the
.tar.xz suffix.

```
$ cd re4son-kernel_4.9.28-20170618
```

Now you are ready to run the install script. **Warning!** *Installing
a broken kernel can render your Raspberry Pi unusable. Please backup
your SD card before continuing.*

```
$ sudo ./install.sh
```

When prompted to install the bluetooth driver, you should:

 - press "N" if you are installing the kernel in Raspbian
 - press "Y" if you are installing the kernel in Kali Linux or any other OS without native Bluetooth support


If you see an error message, the kernel install failed. If everything goes
well, you will see this message: **Kernel install complete!**. You will
need to reboot for the changes to take effect but you can continue with the 
setup of your screen or installation of the kernel headers and reboot later.

If you have a TFT screen to set up or if you want to install the kernel headers, you can just press "N" when prompted to reboot.

The kernel headers are not installed by default, you can install them by running:

```
$ sudo ./install-headers.sh
```

You can now run the Re4son Universal TFT Setup Tool to configure the system for your TFT screen.
The command syntax is:

```
$ sudo ./re4son-pi-tft-setup -t <type>
```

The following types are supported:

'28r'      (Adafruit 2.8" PID 1601)
'28c'      (Adafruit 2.8" PID 1983)
'35r'      (Adafruit 3.5")
'22'       (Adafruit 2.2")
'4dpi'     (4D Systems 2.4",3.2" and 3.5")
'elec22'   (Elecfreak 2.2")
'hy28b'    (Hotmcu HY28B 2.8")
'jb35'     (JBTek 3.5")
'kum35'    (Kuman 3.5")
'pi70'     (Raspberry Pi 7")
'sain32'   (Sainsmart 3.2")
'sain35'   (Sainsmart 3.5")
'wave32'   (Waveshare 3.2")
'wave35'   (Waveshare 3.5")
'wave35o'  (Waveshare 3.5" Overclocked)
'wave35c'  (Waveshare 3.5" Clones, such as:
                           Elecrow 3.5"
                           KeDei 3.5"
	                   Osoyoo 3.5")
'wave40'   (Waveshare 4")
'wave50'   (Waveshare 5" HDMI)

Example command for setting up an Adafruit PiTFT 3.5" on a typical Kali Linux system:

```
./re4son-pi-tft-setup -t 35r -d /root
```

Press 'Y' when prompted to reboot.

If you have any problems with the kernel, please file an issue on GitHub:
https://github.com/Re4son/re4son-raspberrypi-linux/issues

For any other feedback or questions, please join the discussions in our forum:
https://whitedome.com.au/re4son/forums/
